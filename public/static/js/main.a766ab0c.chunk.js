(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),c=a.n(o),i=(a(15),a(9)),s=a(1),l=a(6),m=a.n(l);var u=function(){return r.a.createElement("header",{className:"header section-width"},r.a.createElement("img",{className:"header__vector",src:m.a,alt:"Around Vector"}))},d=r.a.createContext();var f=function(e){var t=r.a.useContext(d),a=e.card.owner._id===t._id,n="elements__trash-icon hover ".concat(a?" ":"elements__trash-icon_is-hidden"),o=e.card.likes.some((function(e){return e._id===t._id})),c="elements__heart-icon hover ".concat(o?"elements__heart-icon_theme_dark":"");return r.a.createElement("div",{className:"elements__template",key:e.card.key},r.a.createElement("li",{className:"elements__element"},r.a.createElement("button",{className:n,onClick:function(){e.onCardDelete(e.card)}}),r.a.createElement("div",{className:"elements__image",style:{backgroundImage:"url(".concat(e.image,")")},onClick:function(){e.onCardClick(e.card)}}),r.a.createElement("div",{className:"elements__bar"},r.a.createElement("p",{className:"elements__name"},e.name),r.a.createElement("div",{className:"elements__like-section"},r.a.createElement("button",{className:c,onClick:function(){e.onCardLike(e.card)}}),r.a.createElement("p",{className:"elements__like-count"},e.likes.length)))))};var h=function(e){var t=r.a.useContext(d);return r.a.createElement("main",null,r.a.createElement("section",{className:"profile section-width"},r.a.createElement("div",{className:"profile__section"},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{className:"profile__avatar",alt:"My avatar",onClick:e.onEditAvatar,src:t.avatar}),r.a.createElement("img",{className:"hover_type_edit",src:"images/EditAvatarIcon.png",alt:"edit icon"})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("h1",{className:"profile__name"},t.name),r.a.createElement("button",{className:"profile__edit-button hover",onClick:e.onEditProfile}),r.a.createElement("p",{className:"profile__description"},t.about))),r.a.createElement("button",{className:"profile__add-button hover",onClick:e.onAddPlace})),r.a.createElement("section",{className:"section-width"},r.a.createElement("ul",{className:"elements"},e.cards.map((function(t,a){return r.a.createElement(f,{key:a,name:t.name,image:t.link,likes:t.likes,card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete,_id:t._id,owner:t.owner})})))))},_=a(7),p=a(8),v=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(_.a)(this,e),this._baseUrl=a,this._headers=n}return Object(p.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}},{key:"getCardList",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}},{key:"getAppInfo",value:function(){return Promise.all([this.getCardList(),this.getUserInfo()])}},{key:"addCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:e.title,link:e.url})}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}},{key:"removeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}},{key:"changeLikeCardStatus",value:function(e,t){return(t?fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"}):fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"})).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)}))}},{key:"setUserInfo",value:function(e){var t=Object(s.a)(e,3),a=t[0],n=t[1],r=t[2];return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:a,about:n,avatar:r})}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error! "+e.statusText)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-3",headers:{authorization:"69eeb443-3163-42be-a4f6-357544c2977b","Content-Type":"application/json"}});var E=function(){return r.a.createElement("footer",{className:"footer section-width"},r.a.createElement("p",{className:"footer__trademark"},"\xa9 2020 Around The U.S. "))};var g=function(e){return r.a.createElement("div",null,r.a.createElement("section",{className:e.isOpened?"form form_type_".concat(e.name," form-with-button form_is-opened"):"form form_type_".concat(e.name," form-with-button")},r.a.createElement("div",{className:"form__overlay"}),r.a.createElement("form",{className:"form__container",onSubmit:e.onSubmit},r.a.createElement("h2",{className:"form__title"},e.title),r.a.createElement("div",null,e.children),r.a.createElement("button",{className:"form__save-button form__".concat(e.submitButtonName," hover hover_type_dark"),type:"submit",onClick:e.onClose},"Save"),r.a.createElement("button",{className:"form__close-button hover",onClick:e.onClose}))))};var b=function(e){return r.a.createElement("section",{className:e.isOpened?"form form_type_image form_is-opened":"form form_type_image"},r.a.createElement("div",{className:"form__overlay form__overlay_type_dark"}),r.a.createElement("form",{className:"form__container form__container_type_image"},r.a.createElement("figure",{className:"big-image"},r.a.createElement("img",{className:"big-image__picture",alt:"card pic",id:"bigImage",src:e.card.link}),r.a.createElement("figcaption",{className:"big-image__caption",id:"caption"},e.card.name)),r.a.createElement("button",{className:"form__close-button form__close-button_type_image hover",onClick:e.onClick})))};var C=function(e){var t=r.a.useState(""),a=Object(s.a)(t,2),n=a[0],o=a[1],c=r.a.useState(""),i=Object(s.a)(c,2),l=i[0],m=i[1],u=r.a.useContext(d);return r.a.useEffect((function(){o(u.name),m(u.about)}),[u]),r.a.createElement(g,{name:"edit-profile",title:"Edit Profile",submitButtonName:"save-button",isOpened:e.isOpen,onClick:e.handleProfileClick,onSubmit:function(t){t.preventDefault(),e.onUpdateUser(n,l,u.avatar)},onClose:e.onClose},r.a.createElement("input",{className:"form__name form__name-profile form__input",type:"text",id:"name",name:"name",defaultValue:u.name,minLength:"2",maxLength:"40",onChange:function(e){return o(e.target.value)},required:!0}),r.a.createElement("span",{id:"name-error",className:"form__input-error"}),r.a.createElement("input",{className:"form__description form__description-profile form__input",type:"text",id:"description",name:"description",defaultValue:u.about,minLength:"2",maxLength:"200",onChange:function(e){return m(e.target.value)},required:!0}),r.a.createElement("span",{id:"description-error",className:"form__input-error"}))};var A=function(e){var t=r.a.useRef();return r.a.createElement(g,{name:"change-avatar",title:"Change profile picture",submitButtonName:"avatar-confirm",isOpened:e.isOpen,onClick:e.handleEditAvatarClick,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar(t.current.value)}},r.a.createElement("input",{ref:t,className:"form__description form__description-card form__input",type:"url",id:"urlAvatar",name:"url",placeholder:"Image link",required:!0}),r.a.createElement("span",{id:"urlAvatar-error",className:"form__input-error"}))};var k=function(e){var t=r.a.useState(),a=Object(s.a)(t,2),n=a[0],o=a[1],c=r.a.useState(),i=Object(s.a)(c,2),l=i[0],m=i[1];return r.a.createElement(g,{name:"add-card",title:"New Place",submitButtonName:"card-save-button",isOpened:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({title:n,url:l})}},r.a.createElement("input",{onChange:function(e){o(e.target.value)},className:"form__name form__name-card form__input",type:"text",id:"title",name:"title",placeholder:"Title",minLength:"1",maxLength:"30",required:!0}),r.a.createElement("span",{id:"title-error",className:"form__input-error"}),r.a.createElement("input",{onChange:function(e){m(e.target.value)},className:"form__description form__description-card form__input",type:"url",id:"url",name:"url",placeholder:"Image link",required:!0}),r.a.createElement("span",{id:"url-error",className:"form__input-error"}))};var N=function(){var e=r.a.useState(!1),t=Object(s.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),c=Object(s.a)(o,2),l=c[0],m=c[1],f=r.a.useState(!1),_=Object(s.a)(f,2),p=_[0],N=_[1],S=r.a.useState(!1),y=Object(s.a)(S,2),U=y[0],O=y[1],j=r.a.useState(!1),w=Object(s.a)(j,2),x=w[0],D=w[1],L=r.a.useState({}),I=Object(s.a)(L,2),P=I[0],T=I[1];function H(){n(!1),m(!1),N(!1),O(!1)}function Q(e){O(!U),D(e)}function B(){N(!p)}r.a.useEffect((function(){v.getUserInfo().then((function(e){T(e)})).catch((function(e){console.log(e)}))}),[]);var R=r.a.useState([]),z=Object(s.a)(R,2),J=z[0],W=z[1];return r.a.useEffect((function(){v.getCardList().then((function(e){return W(e)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement(d.Provider,{value:P},r.a.createElement("div",{className:"page"},r.a.createElement(u,null),r.a.createElement(h,{onEditProfile:function(){n(!a)},onAddPlace:function(){m(!l)},onEditAvatar:B,onCardClick:Q,selectedCard:x,cards:J,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===P._id}));v.changeLikeCardStatus(e._id,!t).then((function(t){var a=J.map((function(a){return a._id===e._id?t:a}));W(a)})).catch((function(e){console.log(e)}))},onCardDelete:function(e){v.removeCard(e._id).then((function(t){console.log(t);var a=J.filter((function(t){return t._id!==e._id}));W(a)})).catch((function(e){console.log(e)}))}}),r.a.createElement(C,{isOpen:a,onUpdateUser:function(e,t){v.setUserInfo([e,t,P.avatar]).then((function(){return T({name:e,about:t,avatar:P.avatar})})).catch((function(e){return console.log(e)}))},handleEditAvatarClick:B,onClose:H}),r.a.createElement(A,{isOpen:p,onUpdateAvatar:function(e){v.setUserAvatar(e).then((function(){return T({name:P.name,about:P.about,avatar:e})})).catch((function(e){console.log(e)}))},onClose:H}),r.a.createElement(k,{isOpen:l,onAddPlace:function(e){v.addCard(e).then((function(e){return W([e].concat(Object(i.a)(J)))})).catch((function(e){console.log(e)}))},onClose:H}),r.a.createElement(g,{name:"delete-card",title:"Are you sure?",submitButtonName:"card-delete-confirm"}),r.a.createElement(b,{isOpened:U,image:"",title:"Image Caption",card:x,onClick:Q}),r.a.createElement(E,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t){e.exports="data:image/png;base64,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"}},[[10,1,2]]]);
//# sourceMappingURL=main.a766ab0c.chunk.js.map